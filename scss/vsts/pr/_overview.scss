@import "../../util/mixins";
@import "../../util/colors";

/**************************************/
/*** PR top administration section ***/

// Top PR section underneath blue titlebar
.hub-title {
  @include setBg($dark);
  margin-left: 0;
  margin-right: 0;
  padding-left: 20px;
  padding-right: 20px;
}

// Little space to the left and right of .hub-title
.splitter.no-split.horizontal > .rightPane {
  @include setBg($dark);
}

.hub-pivot {
  @include setColors($dark);
}

// Main PR container that is beneath everything else
.vc-pullrequest-review-view .files-main-viewer-container {
  @include setBg($darker);
}

.vc-pullrequest-review-view {
  // PR title textbox
  .bowtie input[type=text] {
    @include setColors(tint($dark, 5));
  }

  // Complete button
  .bowtie button.cta, .bowtie button.btn-cta {
    @include setColors($dark-blue);
  }
}

// Title section text boxes
.vc-pullrequest-title-input,
.vc-pullrequest-description-input,
.identity-picker-input,
.vc-pullrequest-view-details-relatedartifacts-addartifactbox.textbox-input,
.hljs
{
  @include setColors($light);
}

.vc-pullRequest-list-section .ms-List-cell {
  @include bg($darker);
  @include text();
  border-bottom: 1px solid rgba(64, 64, 64, 0.7); // very light gray

  span[role="heading"] {
    @include text();

    &:hover {
      @include fg($blue);
    }
  }

  // The comment count at the far right of the pull request row
  a {
    &, &:link, *:visited {
      @include text();
    }
  }
}


// Approve button
#pull-request-vote-button {
  @include bg($dark-blue);
}
#pull-request-vote-button-menubutton {
  @include bg($dark-blue);
  border-left-color: $dark;
}

// Approve button flyout
.ms-Callout {
  @include br($very-light-grey);

  .ms-ContextualMenu-item {
    button:hover {
      @include bg($dark);
    }
  }

  .ms-ContextualMenu-divider {
    @include bg($very-light-grey);
  }
}

// PR elipsis button
.vc-pullrequest-review-view button.clear-button {
  @include bg(transparent);

  &:hover {
    @include bg($lighter);
  }
}


// Author name
.ms-Fabric { @include text(); }

// Overview, files, updates, commits tabs
$tab-text-color: shade($text, 30);
.vc-pullrequest-tabs li a:hover {
  @include fg($tab-text-color);
}
.pivot-view a:visited, .pivot-view a:active {
  @include fg($tab-text-color);
}

.vc-change-summary > *,
.vc-change-summary .changed-files-summary-header,
.vc-change-summary-files .files-container
{
  @include setColors($darker);
}

.vc-pullrequest-review-view .bowtie textarea {
  @include setColors($light);
}


// Pull request completed box
.callout {
  @include setBg($darker);
  @include br($red);

  &.completed {
    @include br($green);
  }
}


// Approval checkmarks
.bowtie-math-plus,
.bowtie-status-success,
.bowtie-math-plus-light,
.bowtie-math-plus-heavy,
.bowtie-status-run
{
  @include fg($green);
}

.bowtie-status-warning,
.bowtie-math-minus-circle,
.bowtie-status-waiting-fill
{
  @include fg($orange);
}

.bowtie-edit-delete,
.bowtie-edit-remove,
.bowtie-status-error,
.bowtie-status-failure,
.bowtie-status-no-fill,
.bowtie-status-stop,
.vc-pullrequest-merge-policy-status-item>i.bowtie-math-multiply
{
  @include fg($red);
}

// Approval options dropdown
.dropdown-colored-button .dropdown-content {
  @include setColors($lighter);

  .dropdown-list .dropdown-row:hover {
    @include setColors($light);
  }
}


// PBI/task auto complete list dropdown
.mention-autocomplete-menu {
  &, & li.ui-state-focus {
    @include setColors($darker);
  }
}
// Footer of auto complete list
.mention-autocomplete-footer {
  @include setColors($light);
}

// Hover over chosen work items
.ra-item:hover, .ra-item-focus {
  @include setColors($light);
}

// Branch dropdown invalid selection
.invalid-selection {
  @include setColors($lighter);
}

// Activity since last view notification
.vc-pullrequest-review-view .vc-pullrequest-activity-feed-last-visit {
  @include setColors($dark-blue);
}

// Overview side timeline
.vc-pullrequest-review-view .vc-pullrequest-activity-feed .vc-pullrequest-activity-box {
  .timeline-icon {
    @include bg($darker);
  }

  .timeline-icon-line {
    border: 1px solid $light;
  }

  .timeline-icon-badge {
    outline-color: $darker;
  }

  .timeline-icon-dot {
    outline: $darker;
  }
}

// PBI tag in description
.mention-widget-workitem {
  @include bg($darker);

  &:hover {
    @include bg($dark);
  }

  .mention-widget-workitem-title {
    @include text();
  }
}

// PR filter comments dropdown
.ms-Dropdown {
  @include text();
}
.ms-Dropdown-title {
  @include setColors($light);
}

// "Build failed" text (probably "Build passed" too)
.vc-pullrequest-merge-policy-status-item a {
  &, &:link, &:visited {
    @include text();
  }
}

// PR Reviewers on left
.vc-pullrequest-review-view {
  .vc-pullrequest-reviewers-list .ms-DetailsRow,
  .vc-pullrequest-reviewer-row {

    &, & .ms-FocusZone {
      @include bg($darker);
      @include text();
    }
  }
}

// Pull request completion dialog
.ms-Dialog-main {
  @include setBg($darker);
}

// Pull request update dropdown
.vc-iteration-selector-row {
  // Update number badge
  .badge {
    @include bg($darker);
  }
  // Update date
  .date {
    @include text();
  }
}

// Hover color change on each row of updates dropdown
.vc-pullrequest-review .ms-Callout-container .ms-Callout.ms-Dropdown-callout .ms-Callout-main>div .ms-Dropdown-items .ms-Dropdown-item {
  &:hover {
    @include setColors($dark);
  }
}

// Divider on overview page
.vc-pullrequest-review-view .vc-pullrequest-activity-feed-divider {
  @include br($very-light-grey);
}

// Dividers on PR list page
.vc-pullRequest-list-section {
  .ms-List-cell, .vc-pullrequests-list-head {
    @include br($very-light-grey);
  }
}
